---
title: "[Java] 타입 변환과 다형성"
description: ""
date: "2022-08-03T20:00:45+09:00"
thumbnail: ""
categories:
  - "Java"
tags:
  - "Java"


---
<!--more-->

### 다형성

- 같은 타입이지만 실행 결과가 다양한 객체를 이용할 수 있는 성질을 의미
- 코드 측면에서 보면 하나의 타입에 여러 객체를 대입함으로써 다양한 기능을 이용할 수 있도록 해준다.
- 다형성을 위해 자바는 부모 클래스로 타입 변환을 허용
    - 부모 타입에 모든 자식 객체가 대입될 수 있다.
    - 이것을 이용하면 객체는 부품화가 가능
    - ex) 자동차를 설계
        - 타이어 클래스 타입으로 적용했다면 이 클래스를 상속한 실제 타이어들은 어떤 것이든 상관없이 대입이 가능
        
        ![Untitled](/images/lang_java/inheritance/타입_변환과_다형성/Untitled.png)
        
        ```java
        public class Car {
        	Tire t1 = new ATire(); 
        	Tire t2 = new BTire();
        }
        ```
        

### 타입 변환

- 데이터 타입을 다른 데이터 타입으로 변환하는 행위
- 클래스 타입도 타입 변환이 존재
    - 상속 관계에 있는 클래스 사이에서 발생
    - 자식 타입은 부모 타입으로 자동 타입 변환이 가능
    - 위 그림에서 ATire와 BTire는 Tire를 상속했기 때문에 Tire 변수에 대입할 수 있다.

# 자동 타입 변환(Promotion)

---

- 자동 타입 변환(Promotion)은 프로그램 실행 도중에 자동적으로 타입 변환이 일어나는 것을 말한다.
    
    ### 자동 타입 변환이 일어나는 조건
    
    ![Untitled](/images/lang_java/inheritance/타입_변환과_다형성/Untitled%201.png)
    
- 자동 타입 변환의 개념
    - 자식은 부모 특징과 기능을 상속받기 때문에 부모와 동일하게 취급될 수 있다는 것
    - ex) 고양이는 동물의 특징과 기능을 상속받음
        - “고양이는 동물이다.”가 성립
        - Animal과 Cat 클래스가 상속 관계
        
        ![Untitled](/images/lang_java/inheritance/타입_변환과_다형성/Untitled%202.png)
        
        - Cat 클래스로부터 Cat 객체를 생성하고 이것을 Animal 변수에 대입하면 자동 타입 변환이 발생
            
            ```java
            Cat cat = new Cat();
            Animal animal = cat;
            //-------------------
            Animal animal = new Cat(); // 가능
            ```
            
            ![Untitled](/images/lang_java/inheritance/타입_변환과_다형성/Untitled%203.png)
            
        - cat과 animal 변수는 타입만 다를 뿐, 동일한 Cat 객체를 참조
- 위 그림에서 animal 변수가 Animal 타입이므로 부모인 Animal 객체를 참조하는 것이 맞지 않느냐라고 생각 가능하지만, 사실은 그렇지 않다.
    - 다음과 같이 cat과 animal 변수를 == 연산해보면 true가 출력, 참조 변수의 == 연산은 참조 주소값이 같을 경우 true를 출력하므로 두 변수가 동일한 객체를 참조하고 있다는 의미
    
    ```java
    cat == animal // true
    ```
    
    - 바로 위의 부모가 아니더라도 상속 계층에서 상속 타입이라면 자동 타입 변환이 일어날 수 있다.
    
    ![Untitled](/images/lang_java/inheritance/타입_변환과_다형성/Untitled%204.png)
    
    - D 객체는 B와 A 타입으로 자동 타입 변환이 가능
    - E 객체는 C와 A 타입으로 자동 타입 변환이 가능
    - D 객체는 C 타입으로 변환 불가능
    - E 객체는 B 타입으로 변환 불가능
        - 상속 관계가 아니기 때문
- ex)
    - PromotionEx.java
        - 자동 타입 변환
        
        ```java
        class A{}
        
        class B extends A{}
        class C extends A{}
        class D extends B{}
        class E extends C{}
        
        public class PromotionEx {
        	public static void main(String[] args) {
        		B b = new B();
        		C c = new C();
        		D d = new D();
        		E e = new E();
        		
        		A a1 = b;
        		A a2 = c;
        		A a3 = d;
        		A a4 = e;
        		
        		B b1 = d;
        		C c1 = e;
        		
        		//B b3 = e; // 컴파일 에러(상속 관계에 있지 않음)
        		//C c2 = d; // 컴파일 에러(상속 관계에 있지 않음)
        	}
        }
        ```
        
        ![Untitled](/images/lang_java/inheritance/타입_변환과_다형성/Untitled%205.png)
        
    - 부모 타입으로 자동 타입 변환된 이후에도 부모 클래스에 선언된 필드와 메소드만 접근이 가능
    - 변수는 자식 객체를 참조하지만 변수로 접근 가능한 멤버는 부모 클래스 멤버로만 한정
    - 예외
        - 메소드가 자식 클래스에서 오버라이딩되었다면 자식 클래스의 메소드가 대신 호출
        - 이 부분은 다형성(Polymorphism)과 관련이 있기 때문에 매우 중요한 성질
    
    ![Untitled](/images/lang_java/inheritance/타입_변환과_다형성/Untitled%206.png)
    
    - Child 객체는 `method3()` 메소드를 가지고 있지만, Parent 타입으로 변환된 이후에는 `method3()`을 호출할 수 없다.
    - method2() 메소드는 부모와 자식 모두에게 있다.
        - 이렇게 오버라이딩된 메소드는 타입 변환 이후에도 자식 메소드가 호출된다.
    
- ex) 자동 타입 변환 후의 멤버 접근
    - Parent.java
        
        ```java
        public class Parent {
        	public void method1() {
        		System.out.println("Parent-method1()");
        	}
        	
        	public void method2() {
        		System.out.println("Parent-method2()");
        	}
        }
        ```
        
    - Child.java
        
        ```java
        public class Child extends Parent{
        	@Override
        	public void method2() { // 재정의
        		System.out.println("Child-method2()");
        	}
        	
        	public void method3() {
        		System.out.println("Child-method3");
        	}
        }
        ```
        
    - ChildEx.java
        
        ```java
        public class ChildEx {
        
        	public static void main(String[] args) {
        		Child child = new Child();
        		
        		Parent parent = child; // 자동타입변화
        		parent.method1();
        		parent.method2(); // 재정의된 메소드가 호출됨
        		//parent.method3();
        	}
        
        }
        ```
        
    
    ![Untitled](/images/lang_java/inheritance/타입_변환과_다형성/Untitled%207.png)
    

---

## References

- 이것이 자바다 신용권의 Java 프로그래밍 정복 - 신용권 지음, 한빛미디어 출판