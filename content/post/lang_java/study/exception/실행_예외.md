---
title: "[Java] 실행 예외"
description: ""
date: "2022-09-05T21:30:45+09:00"
thumbnail: ""
categories:
  - "Java"
tags:
  - "Java"


---
<!--more-->

- 자바 컴파일러가 체크를 하지 않기 때문에 개발자의 경험에 의해서 예외 처리 코드를 삽입해야 한다.
- 예외 처리 코드를 삽입하지 않았을 경우, 해당 예외가 발생하면 프로그램은 곧바로 종료된다.

# NullPointerException

---

- `java.lang.NullPointerException`
- 객체 참조가 없는 상태
    - null 값을 갖는 참조 변수로 객체 접근 연산자인 도트( . )를 사용했을 때 발생
    - 객체가 없는 상태에서 객체를 사용하려 하여 예외가 발생
- ex) NullPointerExceptionEx.java
    
    ```java
    public class NullPointerExceptionEx {
    
    	public static void main(String[] args) {
    		String data = null;
    		System.out.println(data.toString());
    
    	}
    
    }
    ```
    
    - data 변수는 null 값을 가지고 있기 때문에 String 객체를 참조하고 있지 않다.
    - 밑에 라인에서 String 객체의 `toString()` 메소드를 호출
        - NullPointerException 발생
    
    ![Untitled](/images/lang_java/exception/실행_예외/Untitled.png)
    

# ArrayIndexOutOfBoundsException

---

- `java.lang.ArrayIndexOutOfBoundsException`
- 배열에서 인덱스 범위를 초과하여 사용할 경우 발생
- ex) ArrayIndexOutOfBoundsExceptionEx.java
    
    ```java
    public class ArrayIndexOutOfBoundsExceptionEx {
    
    	public static void main(String[] args) {
    		String data1 = args[0];
    		String data2 = args[1];
    		
    		System.out.println("args[0] : " + data1);
    		System.out.println("args[1] : " + data2);
    
    	}
    
    }
    ```
    
    - 두 개의 실행 매개값을 주지 않았기 때문에 ArrayIndexOutOfBoundsException 발생
        - args[0], args[1]과 같이 인덱스 사용 불가
    
    ![Untitled](/images/lang_java/exception/실행_예외/Untitled%201.png)
    
- 위 소스를 다음과 같이 수정
    - 배열값을 읽기 전에 배열의 길이를 먼저 조사
    - 실행 매개값이 없거나 부족할 경우 조건문을 이용해서 사용자에게 실행 방법을 알려준다.
    
    ```java
    public class ArrayIndexOutOfBoundsExceptionEx {
    
    	public static void main(String[] args) {
    		if(args.length == 2) {
    			String data1 = args[0];
    			String data2 = args[1];
    			
    			System.out.println("args[0] : " + data1);
    			System.out.println("args[1] : " + data2);
    		} else {
    			System.out.println("[ 실행 방법 ]");
    			System.out.println("java ArrayIndexOutOfBoundsExceptionEx   ");
    			System.out.println("값1  값2");
    		}
    		
    
    	}
    
    }
    ```
    
    ![Untitled](/images/lang_java/exception/실행_예외/Untitled%202.png)
    

# NumberFormatException

---

- `java.lang.NumberFormatException`
- 문자열로 되어 이쓴 데이터를 숫자로 변경하는 경우가 자주 발생
- 가장 많이 사용되는 코드
    
    ![Untitled](/images/lang_java/exception/실행_예외/Untitled%203.png)
    
- Integer와 Double은 Wrapper 클래스라고 한다.
    - 이 클래스의 정적 메소드인 `parseXXX()` 메소드를 이용하면 문자열을 숫자로 변환 가능
    - 이 메소드들은 매개값인 문자열이 숫자로 변환될 수 있다면 숫자를 리턴
    - 숫자로 변환될 수 없는 문자가 포함되어 있다면 `java.lang.NumberFormatException`을 발생시킨다.
- ex) NumberFormatExceptionEx.java
    
    ```java
    public class NumberFormatExceptionEx {
    
    	public static void main(String[] args) {
    		String data1 = "100";
    		String data2 = "a100";
    		
    		int value1 = Integer.parseInt(data1);
    		int value2 = Integer.parseInt(data2); // NumberFormatException 발생
    		
    		int result = value1 + value2;
    		System.out.println(data1 + " + " + data2 + " = " + result);
    
    	}
    
    }
    ```
    
    - data1의 변수 “100” 문자열은 숫자로 변환가능
    - data2의 변수 “a100” 문자열을 숫자로 변환 불가
        - NumberFormatException 발생
    
    ![Untitled](/images/lang_java/exception/실행_예외/Untitled%204.png)
    

# ClassCastException

---

- 타입 변환(Casting)은 상위 클래스와 하위 클래스 간에 발생하고 구현 클래스와 인터페이스 간에도 발생
    - 이러한 관계가 아니라면 클래스는 다른 클래스로 타입 변환 불가
- 억지로 타입 변환을 시도할 경우 ClassCastException이 발생
- ex) 다음과 같이 상속 관계와 구현 관계가 있다고 가정
    
    ![Untitled](/images/lang_java/exception/실행_예외/Untitled%205.png)
    
    - 올바른 타입 변환
        - Animal 타입 변수에 대입된 객체가 Dog이므로 다시 Dog 타입으로 변환하는 것은 문제가 없다.
        - RemoteControl 타입 변수에 대입된 객체가 Television이므로 다시 Television 타입으로 변환하는 것은 문제가 없다.
        
        ```java
        Animal animal = new Dog();
        Dog dog = (Dog) animal;
        
        //---------------------------------
        
        RemoteControl rc = new Television();
        Television tv = (Telvision) rc;
        ```
        
    - ClassCastException이 발생하는 경우
        - 대입된 객체가 아닌 다른 클래스 타입으로 타이 변환했기 때문
        
        ```java
        Animal animal = new Dog();
        Cat cat = (cat) animal;
        
        //----------------------------
        
        RemoteControl rc = new Television();
        Audio audio = (Audio) rc;
        ```
        
    - ClassCastException을 발생시키지 않으려면 타입 변환 전에 타입 변환이 가능한지 `instanceof`연산자로 확인하느 것이 좋다.
        - `instanceof` 연산의 결과가 true이면 좌향 객체를 우향 타입으로 변환이 가능하다는 의미
        
        ```java
        Animal animal = new Dog();
        if(animal instanceof Dog) {
        	Dog dog = (Dog) animal;
        } else if(animal instanceof Cat) {
        	Cat cat = (Cat) animal;
        }
        
        //------------------------------------
        
        RemoteControl rc = new Audio();
        if(rc instanceof Television) {
        	Television tv = (Television) rc;
        } else if(rc instanceof Audio) {
        	Audio audio = (Audio) rc;
        }
        ```
        
- ex) ClassCastExceptionEx.java
    
    ```java
    public class ClassCastExceptionEx {
    
    	public static void main(String[] args) {
    		Dog dog = new Dog();
    		changeDog(dog);
    		
    		Cat cat = new Cat();
    		changeDog(cat);
    
    	}
    	
    	public static void changeDog(Animal animal) {
    		Dog dog = (Dog) animal; // ClassCastException 발생 가능
    	}
    
    }
    
    class Animal{}
    class Dog extends Animal{}
    class Cat extends Animal{}
    ```
    
    - Cat 객체를 매개값으로 주었기 때문에 Dog 타입으로 변환 불가
    
    ![Untitled](/images/lang_java/exception/실행_예외/Untitled%206.png)
    
- 위 코드를 수정
    
    ```java
    public class ClassCastExceptionEx {
    
    	public static void main(String[] args) {
    		Dog dog = new Dog();
    		changeDog(dog);
    		
    		Cat cat = new Cat();
    		changeDog(cat);
    
    	}
    	
    	public static void changeDog(Animal animal) {
    		if(animal instanceof Dog) {
    			Dog dog = (Dog) animal; // ClassCastException 발생 가능
    		}
    
    	}
    
    }
    
    class Animal{}
    class Dog extends Animal{}
    class Cat extends Animal{}
    ```
    
    ![Untitled](/images/lang_java/exception/실행_예외/Untitled%207.png)
    
    - 예외가 발생하지 않음

---

## References

- 이것이 자바다 신용권의 Java 프로그래밍 정복 - 신용권 지음, 한빛미디어 출판