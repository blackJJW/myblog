---
title: "[Java] 사용자 정의 예외와 예외 발생"
description: ""
date: "2022-09-13T22:30:45+09:00"
thumbnail: ""
categories:
  - "Java"
tags:
  - "Java"


---
<!--more-->

- 애플리케이션 서비스와 관련된 예외를 애플리케이션 예외(Application Exception)
    - 개발자가 직접 정의해서 만들어야 하므로 사용자 정의 예외라고도 한다.

# 사용자 정의 예외 클래스 선언

---

- 컴파일러가 체크하는 일반 예외로 선언할 수도 있고, 컴파일러가 체크하지 않는 실행 예외로 선언 가능
- 일반 예외로 선언할 경우 Exception을 상속
    - 실행 예외로 선언할 경우 RuntimeException을 상속
    
    ```java
    public class XXXException extends [ Exception | RuntimeException ]{
    	public XXXException() {}
    	public XXXException(String message) { super(message); }
    }
    ```
    
    - 사용자 정의 예외 클래스 이름은 Exception으로 끝나는 것이 좋다.
    - 사용자 정의 예외 클래스도 필드, 생성자, 메소드 선언들을 포함할 수 있지만 대부분 생성자 선언만을 포함
        - 생성자는 두 개를 선언하는 것이 일반적
            - 매개 변수가 없는 생성자
            - 예외 발생 원인(예외 메시지)을 전달하기 위해 String 타입읭 매개 변수를 갖는 생성자
        - String 타입의 매개 변수를 갖는 생성자는 상위 클래스의 생성자를 호출하여 예외 메시지를 넘겨준다.
        - 예외 메시지의 용도는 `catch {}` 블록의 예외 처리 코드에서 이용하기 위해서이다.
- ex) 잔고 부족 예외를 사용자 정의 예외 클래스로 선언
    - BalanceInsufficientException.java
    
    ```java
    public class BalanceInsufficientException extends Exception{
    
    	public BalanceInsufficientException() {}
    	public BalanceInsufficientException(String message) {
    		super(message);
    	}
    	
    }
    ```
    
    - Exception을 상속하기 때문에 컴파일러에 의해 체크되는 예외가 된다.
        - 소스 작성 시 `try`-`catch` 블록으로 예외 처리가 필요

---

# 예외 발생시키기

- 사용자 정의 예외 또는 자바 표준 예외를 코드에서 발생시키는 방법
    
    ```java
    throw new XXXException();
    throw new XXXException("메시지");
    ```
    
- 예외 객체를 생성할 때는 기본 생성자 또는 예외 메시지를 갖는 생성자 중 어떤 것을 사용해도 된다.
- `catch` 블록에서 예외 메시지가 필요하다면 예외 메시지를 갖는 생성자를 이용해야 한다.
- 예외 발생 코드를 가지고 있는 메소드는 내부에서 `try`-`catch` 블록으로 예외를 처리 가능
    - 대부분은 자신을 호출한 곳에서 예외를 처리하도록 `throws`키워드로 예외를 떠넘긴다.
    
    ```java
    public void method() throws XXXException {
    	throw new XXXException("메시지");
    }
    ```
    
    - `throws` 키워드를 포함하고 있는 메소드는 호출한 곳에서 다음과 같이 예외 처리를 해주어야 한다.
        
        ```java
        try {
        	method();
        } catch(XXXException e){
        	// 예외 처리
        }
        ```
        
- ex) 은행 계좌(Account) 클래스
    - 출금(withdraw) 메소드에서 잔고(balance) 필드와 출금액을 비교하여 잔고가 부족하면 `BalanceInsufficientException`을 발생
    
    ```java
    public class Account {
    
    	private long balance;
    	
    	public Account() {}
    	
    	public long getBalance() {
    		return balance;
    	}
    	
    	public void deposit(int money) {
    		balance += money;
    	}
                                         // 사용자 정의 예외 떠넘기기	
    	public void withdraw(int money) throws BalanceInsufficientException{
    		if(balance < money) {
    			throw new BalanceInsufficientException("잔고부족 : " + (money - balance) + " 모자람");
    			// 사용자 정의 예외 발생
    		}
    		balance -= money;
    	}
    }
    ```
    

---

## References

- 이것이 자바다 신용권의 Java 프로그래밍 정복 - 신용권 지음, 한빛미디어 출판