---
title: "[Java] JavaFX, 뷰 컨트롤"
description: ""
date: "2022-12-22T21:00:30+09:00"
thumbnail: ""
categories:
  - "Java"
tags:
  - "Java"
  - "JavaFX"

---
<!--more-->

- 텍스트 또는 이미지등을 보여준다.
    - 목록 형태로 보여주는 ListView
    - 테이블 형태로 보여주는 TableView
    - 이미지를 보여주는 ImageView
    
    ![Untitled](/images/lang_java/javaFx/뷰_컨트롤/Untitled.png)
    

## ImageView 컨트롤

- 이미지를 보여주는 컨트롤
- FXML로 선언하는 방법
    
    ```xml
    <ImageView fitWidth="폭" fitHeight="높이" preserveRatio="true" />
    ```
    
    - fitWidth와 fitHeight는 ImageView의 폭과 높이를 지정
    - preserveRatio 속성은 이미지의 종횡비를 유지할 것인지를 지정
        - false를 주면 종횡비와 상관없이 fitWidth와 fitHeight에 맞게 ImageView 크기가 고정
        - true를 주면 이미지의 종횡비를 유지하기 위해 ImageView 크기가 조정
- ImageView에 보여줄 이미지는 두 가지 방법으로 설정
    - ImageView의 생성자 매개값으로 Image 객체를 설정하는 방법
        
        ```xml
        <ImageView preserveRatio="true">
        	<Image url="@images/flower.png"/>
        </ImageView>
        ```
        
    - ImageView의 `setImage()` 메소드로 설정
        - 매개값은 Image 객체
        
        ```xml
        <ImageView fitWidth="200" fitHeight="150" preserveRatio="true">
        	<image>
        		<Image url="@images/flower.png"/>
        	</image>
        </ImageView>
        ```
        
    - Image는 url 속성(생성자 매개 변수)을 가지고 있음
        - FXML 파일 위치에서 상대 경로로 “@이미지 경로”를 값으로 주면 된다.

## ListView 컨트롤

- 항목들을 목록으로 보여주는 컨트롤
- FXML로 선언하는 방법
    
    ```xml
    <ListView prefWidth="폭" prefHeight="높이"/>
    ```
    
- ListView에 항목을 추가하려면 `setItems(ObservableList<T> value)` 메소드를 사용
    - ObservableList 구현 객체는 `FXCollections.observableArrayList(E… items)` 정적 메소드로 생성
    
    ```java
    listView.setItems(FXCollections.observableArrayList("Swing", "JavaFX"));
    ```
    
    - 외부 데이터로 항목을 추가하는 경우가 많음
        - 컨트롤러에서 자바 코드로 추가하는 것이 일반적
    - 고정 항목일 경우 FXML 파일에서 직접 선언해도 좋다.
    
    ```xml
    <ListView fx:id="listView" prefHeight="100" prefWidth="100">
    	<items>
    		<FXCollections fx:factory="observableArrayList">
    			<String fx:value="Swing"/>
    			<String fx:value="JavaFX"/>
    		</FXCollections>
    	</items>
    </ListView>
    ```
    
- ListView에서 선택된 인덱스와 항목을 얻으려면 속성 감시를 이용 가능
    - `getSelectionModel()` 메소드로 `MultipleSelectionModel`을 얻고 나서, `selectedIndexProperty` 또는 `selectedItemProperty`에 리스너를 설정
    - `selectedIndexProperty`는 선택된 인덱스
    - `selectedItemProperty`는 선택된 항목
    - `selectedItemProperty`에 리스너를 설정하는 코드
    
    ```java
    listView.getSelectionModel().selectedItemProperty().addListener(
    	new ChangeListener<String>() {
    		@Override
    		public void changed(ObservableValue<? extends String> observable,
                            String oldValue, String newValue) { ... }
    	}
    );
    ```
    

## TableView 컨트롤

- FXML로 선언하는 방법
    - `<columns>` 태그 안에 만들고자 하는 만큼 `<TableColumn>` 태그를 선언
    
    ```xml
    <TableView prefHeight="100" prefWidth="300">
    	<columns>
    		<TableColumn prefWidth="150" text="스마트폰"/>
    		<TableColumn prefWidth="150" text="이미지"/>
    	</columns>
    </TableView>
    ```
    
- TableView에 행(row)을 추가하려면 행의 데이터를 가지고 있는 모델(model) 객체가 필요
- ex) 모델 클래스
    - 스마트폰과 이미지 컬럼이 존재
        - 이 두 값을 속성으로 갖는 모델 객체를 생성하여 행의 데이터로 제공
    - Phone 모델 클래스를 생성
    - Phone.java
    
    ```java
    import javafx.beans.property.SimpleStringProperty;
    
    public class Phone {
    	private SimpleStringProperty smartPhone;
    	private SimpleStringProperty image;
    	
    	public Phone(String smartPhone, String image) {
    		this.smartPhone = new SimpleStringProperty(smartPhone);
    		this.image = new SimpleStringProperty(image);
    	}
    	
    	public String getSmartPhone() {
    		return smartPhone.get();
    	}
    	
    	public void setSmartPhone(String smartPhone) {
    		this.smartPhone.set(smartPhone);
    	}
    	
    	public String getImage() {
    		return image.get();
    	}
    	
    	public void setImage(String image) {
    		this.image.set(image);
    	}
    }
    ```
    
- 모델의 속성 타입은 컬럼 값의 데이터 타입에 따라서 `javafx.beans.property` 패키지의 `SimpleXXXProperty`를 사용
- 모델 클래스를 작성하였다면 모델 속성과 TableColumn을 연결시키는 코드를 작성해야 한다.
    - TableColumn은 TableView의 `getColumn().get(인덱스)`로 얻음
        - 첫 번째 컬럼의 인덱스는 0
    - TableColumn의 `setCellValueFactory()` 메소드는 매개값으로 제공되는 `PropertyValueFactory(”모델속성명”)`을 이용해서 모델 속성값을 TableColumn 값으로 세팅
    
    ex) 첫 번째 TableColumn을 모델 클래스의 smartPhone 속성과 연결시키는 코드
    
    ```java
    TableColumn tcSmartPhone = tableView.getColumns().get(0);
    tcSmartPhone.setCellValueFactory( new PropertyValueFactory("smartPhone") );
    ```
    
- 셀(cell) 내에서 정렬이 필요한 경우네는 TableColumn의 `setStyle()` 메소드로 CSS를 적용
    
    ```java
    tcSmartPhone.setStyle("-fx-alignment: CENTER;");
    ```
    
- 행의 데이터를 주기 위해 ObservableList에 모델 객체들을 다음과 같이 저장
    - ObservableList를 매개값으로 해서 TableView의 `setItems()` 메소드를 호출하여 행들을 추가
    
    ```java
    ObservableList phoneList = FXCollections.observableArrayList(
    	new Phone("G-S1", "phone01.png"),
    	new Phone("G-S2", "phone02.png"),
    	new Phone("G-S3", "phone03.png"),
    );
    tableView.setItems(phoneList);
    ```
    
- TableView에서 선택된 행의 인덱스와 모델 객체를 얻으려면 속성 감시를 이용할 수 있다.
    - `getSelectionModel()` 메소드로 TableViewSelectionModel을 얻고 나서, selectedIndexProperty 또는 selectedItemProperty에 리스너를 설정
    - selectedIndexProperty는 선택된 행의 모델 객체
    
    ex) selectedIndexProperty에 리스너를 설정하는 코드
    
    ```java
    tableView.getSelectionModel().selectedItemProperty().addListener(
    	new ChangeListener<Phone>() {
    		@Override
    		public void changed(ObservableValue<? extends Phone> observable,
                            Phone oldValue, Phone newValue) { ... }
    	}
    );
    ```
    
- ex) 뷰 컨트롤 배치
    - ListView의 항목을 선택하면 같은 인덱스를 가지는 TableView의 행이 자동 선택되도록 한다.
    - TableView에서 행이 선택되면 이미지 컬럼 값을 읽고 ImageView에 이미지를 보여준다.
    - 하단의 [확인] 버튼을 클릭하면 ListView와 TableView에 선택된 정보를 콘솔에 출력
    - Root.fxml
    
    ```java
    <?xml version="1.0" encoding="UTF-8"?>
    
    <?import javafx.scene.control.Button?>
    <?import javafx.scene.control.Label?>
    <?import javafx.scene.control.ListView?>
    <?import javafx.scene.control.TableColumn?>
    <?import javafx.scene.control.TableView?>
    <?import javafx.scene.image.ImageView?>
    <?import javafx.scene.layout.AnchorPane?>
    
    <AnchorPane prefHeight="180.0" prefWidth="500.0" 
    			xmlns:fx="http://javafx.com/fxml/1" 
    			xmlns="http://javafx.com/javafx/19"
    			fx:controller="tableView.RootController">
       <children>
          <Label layoutX="11.0" layoutY="9.0" text="ListView" />
          <ListView layoutX="10.0" layoutY="30.0" 
          			prefHeight="100.0" prefWidth="100.0"
          			fx:id="listView" />
          <Label layoutX="125.0" layoutY="9.0" text="TableView" />
          <TableView layoutX="120.0" layoutY="30.0" 
          			 prefHeight="100.0" prefWidth="290.0"
          			 fx:id="tableView">
            <columns>
              <TableColumn prefWidth="100.0" text="스마트폰" />
              <TableColumn prefWidth="100.0" text="이미지" />
            </columns>
          </TableView>
          <Label layoutX="425.0" layoutY="9.0" text="ImageView" />
          <ImageView fitHeight="100.0" fitWidth="60.0" 
          			 layoutX="430.0" layoutY="30.0" 
          			 pickOnBounds="true" preserveRatio="true" 
          			 fx:id="imageView" />
          <Button layoutX="190.0" layoutY="145.0" text="확인" 
                  onAction="#handleBtnOkAction" />
          <Button layoutX="260.0" layoutY="145.0" text="취소" 
                  onAction="#handleBtnCancelAction" />
       </children>
    </AnchorPane>
    ```
    
    - RootController.java
    
    ```java
    import java.net.URL;
    import java.util.ResourceBundle;
    
    import javafx.application.Platform;
    import javafx.beans.value.ChangeListener;
    import javafx.beans.value.ObservableValue;
    import javafx.collections.FXCollections;
    import javafx.collections.ObservableList;
    import javafx.event.ActionEvent;
    import javafx.fxml.FXML;
    import javafx.fxml.Initializable;
    import javafx.scene.control.ListView;
    import javafx.scene.control.TableColumn;
    import javafx.scene.control.TableView;
    import javafx.scene.control.cell.PropertyValueFactory;
    import javafx.scene.image.Image;
    import javafx.scene.image.ImageView;
    
    public class RootController implements Initializable {
    	@FXML private ListView<String> listView;  // ListView<아이템타입>
    	@FXML private TableView<Phone> tableView; // TableView<모델클래스>
    	@FXML private ImageView imageView;
    	
    	@Override
    	public void initialize(URL location, ResourceBundle resources) {
    		listView.setItems(FXCollections.observableArrayList(
    			"G-S1", "G-S2", "G-S3", "G-S4", "G-S5", "G-S6", "G-S7"
    		));
    		
    		// selectedIndex 속성 감시
    		listView.getSelectionModel().selectedIndexProperty().addListener(
    			new ChangeListener<Number>() {
    				@Override
    				public void changed(ObservableValue<? extends Number> observable,
    					Number oldValue, Number newValue) {
    					tableView.getSelectionModel().select(newValue.intValue());
    					                            // 변경된 인덱스의 행 선택
    					tableView.scrollTo(newValue.intValue());
    					// 변경괸 인덱스 위치로 스크롤 시킴
    				}
    			}
    		);
    		
    		ObservableList phoneList = FXCollections.observableArrayList(
    			// 총 7개의 행 데이터
    			new Phone("G-S1", "phone01.png"),
    			new Phone("G-S2", "phone02.png"),
    			new Phone("G-S3", "phone03.png"),
    			new Phone("G-S4", "phone04.png"),
    			new Phone("G-S5", "phone05.png"),
    			new Phone("G-S6", "phone06.png"),
    			new Phone("G-S7", "phone07.png")
    		);
    		
    		TableColumn tcSmartPhone = tableView.getColumns().get(0);
    		tcSmartPhone.setCellValueFactory(new PropertyValueFactory("smartPhone"));
    		tcSmartPhone.setStyle("-fx-alignment: CENTER;");
    		
    		TableColumn tcImage = tableView.getColumns().get(1);
    		tcImage.setCellValueFactory(new PropertyValueFactory("image"));
    		tcImage.setStyle("-fx-alignment: CENTER;");
    		
    		tableView.setItems(phoneList);
    		
    		// selectedItem 속성 감시
    		tableView.getSelectionModel().selectedItemProperty().addListener(
    			new ChangeListener<Phone>() {
    				@Override
    				public void changed(ObservableValue<? extends Phone> observable,
    					Phone oldValue, Phone newValue) {
    					if(newValue != null) {
    						imageView.setImage(new Image(
    							getClass().getResource("images/" + newValue.getImage()).toString())
                );
    					}
    				}
    			}
    		);
    	}
    	
    	public void handleBtnOkAction(ActionEvent e) {
    		String item = listView.getSelectionModel().getSelectedItem();
    		                                       // 선택된 항목(행)의 데이터 얻기
    		
    		System.out.println("ListView 스마트폰 :" + item);
    		
    		Phone phone = tableView.getSelectionModel().getSelectedItem();
    		                                       // 선택된 항목(행)의 데이터 얻기
    		
    		System.out.println("TableView 스마트폰 : " + phone.getSmartPhone());
    		System.out.println("TableView 이미지 : " + phone.getImage());
    	}
    	
    	public void handleBtnCancelAction(ActionEvent e) {
    		Platform.exit();
    	}
    }
    ```
    
    - AppMain.java
    
    ```java
    import javafx.application.Application;
    import javafx.fxml.FXMLLoader;
    import javafx.scene.Parent;
    import javafx.scene.Scene;
    import javafx.stage.Stage;
    
    public class AppMain extends Application {
    	@Override
    	public void start(Stage primaryStage) throws Exception {
    		Parent parent = FXMLLoader.load(getClass().getResource("Root.fxml"));
    		Scene scene = new Scene(parent);
    		
    		primaryStage.setTitle("AppMain");
    		primaryStage.setScene(scene);
    		primaryStage.show();
    	}
    	public static void main(String[] args) {	
    		launch(args);
    	}
    
    }
    ```
    
    ![Untitled](/images/lang_java/javaFx/뷰_컨트롤/Untitled%201.png)
    
    ![Untitled](/images/lang_java/javaFx/뷰_컨트롤/Untitled%202.png)
    
    ![Untitled](/images/lang_java/javaFx/뷰_컨트롤/Untitled%203.png)
    
    ![Untitled](/images/lang_java/javaFx/뷰_컨트롤/Untitled%204.png)
    

---

## References

- 이것이 자바다 신용권의 Java 프로그래밍 정복 - 신용권 지음, 한빛미디어 출판