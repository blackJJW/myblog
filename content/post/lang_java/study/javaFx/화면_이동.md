---
title: "[Java] JavaFX, 화면 이동"
description: ""
date: "2022-12-29T13:00:30+09:00"
thumbnail: ""
categories:
  - "Java"
tags:
  - "Java"
  - "JavaFX"
---
<!--more-->

- 화면을 이동하는 가장 쉬운 방법은 Stage에 새로운 Scene을 세팅하는 것
- 애플리케이션이 실행되면 start() 메소드는 메인화면인 Scene을 생성
    - primaryStage의 `setScene()` 메소드로 Scene을 설정
- 메인 클래스의 `start()` 메소드
    
    ```java
    @Override
    public void start(Stage primaryStage) throws Exception {
    	primaryStage.setTitle("AppMain");
    	Parent root = FXMLLoader.load(getClass().getResource("Root.fxml"));
    	Scene scene = new Scene(root);
    	primaryStage.setScene(scene); // 메인 화면 설정
    	primaryStage.show();
    }
    ```
    
    - 메인 화면에서 로그인 화면으로 이동하기 위해 버튼을 클릭했다고 가정
        - 컨트롤러의 이벤트 처리 메소드는 로그인 Scene을 생성
        - primaryStage의 `setScene()` 메소드로 메인 Scene을 로그인 Scene으로 변경할 수 있다.
    
    ```java
    public void handlebtnLogin(ActionEvent event) {
    	try {
    		Parent login = FXMLLoader.load(getClass().getResource("Login.fxml"));
    		Scene scene = new Scene(login);
    		Stage primaryStage = (Stage) btnLogin.getScene().getWindow();
    		primaryStage.setScene(scene); // 로그인 화면으로 이동
    	} catch(Exception e) {
    			e.printStackTrace();
    	}
    }
    ```
    
- 애니메이션을 적용하려면 이전 화면과 다음 화면이 일시적으로 공존해야 한다.
    - `setScene()` 메소드로 화면을 이동하게 되면, 이전 Scene은 Stage에서 제거되므로 애니메이션을 적용할 수 없다.
    - StackPane을 이용하면 화면 이동 효과와 함께 애니메이션을 적용할 수 있다.
    
    ![Untitled](/images/lang_java/javaFx/화면_이동/Untitled.png)
    
    - Scene은 하나만 생성하고, StackPane을 루트 컨테이너로 해서 메인 화면과 로그인 화면을 추가
- ex)
    - 메인 화면만 StackPane에 추가되어 있는 상태에서 메인 화면의 [로그인] 버튼을 클릭하면 로그인 화면이 생성되고 StackPane에 추가
    - StackPane은 나중에 추가된 로그인 화면만 사용자에게 보여주고 메인 화면은 뒤로 숨긴다.
    - 로그인 화면의 [메인] 버튼을 클릭하면 StackPane에서 로그인 화면을 제거함으로써 밑에 있는 메인 화면이 보여진다.
    - 이와 같은 방법으로 화면을 이동하게 되면 이전 화면과 다음 화면이 일시적으로 공존하게 되고 애니메이션을 적용할 수 있게 된다.
    - 메인화면
        - Root.fxml
    
    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    
    <?import javafx.geometry.Insets?>
    <?import javafx.scene.control.Button?>
    <?import javafx.scene.control.Label?>
    <?import javafx.scene.layout.BorderPane?>
    <?import javafx.scene.layout.StackPane?>
    <?import javafx.scene.layout.VBox?>
    
    <StackPane prefHeight="500.0" prefWidth="350.0" 
               xmlns="http://javafx.com/javafx/19" 
               xmlns:fx="http://javafx.com/fxml/1"
               fx:controller="sceneMove.RootController">
       <children>
          <BorderPane>
             <top>
                <BorderPane style="-fx-background-color: #eaeaea;">
                   <center>
                      <Label alignment="CENTER" prefWidth="215.0" text="메인 화면" />
                   </center>
                   <right>
                      <Button fx:id="btnLogin" mnemonicParsing="false" text="로그인" />
                   </right>
                   <padding>
                      <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                   </padding>
                </BorderPane>
             </top>
             <center>
                <VBox style="-fx-background-color: #0000ff;" />
             </center>
          </BorderPane>
       </children>
    </StackPane>
    ```
    
    - 메인화면 컨트롤러
        - RootController.java
    
    ```java
    import java.net.URL;
    import java.util.ResourceBundle;
    
    import javafx.event.ActionEvent;
    import javafx.fxml.FXML;
    import javafx.fxml.FXMLLoader;
    import javafx.fxml.Initializable;
    import javafx.scene.Parent;
    import javafx.scene.control.Button;
    import javafx.scene.layout.StackPane;
    
    public class RootController implements Initializable {
    	@FXML private Button btnLogin;
    	
    	@Override
    	public void initialize(URL location, ResourceBundle resources) {
    		btnLogin.setOnAction( e -> handleBtnLogin(e) );
    	}
    	
    	public void handleBtnLogin(ActionEvent event) {
    		try {
    			// 로그인 화면으로 이동
    			Parent login = FXMLLoader.load(getClass().getResource("Login.fxml"));
    			StackPane root = (StackPane) btnLogin.getScene().getRoot();
    			root.getChildren().add(login);
    		} catch(Exception e) {
    			e.printStackTrace();
    		}
    	}
    }
    ```
    
    - 로그인 화면
        - Login.fxml
    
    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    
    <?import javafx.geometry.Insets?>
    <?import javafx.scene.control.Button?>
    <?import javafx.scene.control.Label?>
    <?import javafx.scene.layout.BorderPane?>
    <?import javafx.scene.layout.VBox?>
    
    <BorderPane prefHeight="500.0" prefWidth="350.0" 
                xmlns="http://javafx.com/javafx/19" 
                xmlns:fx="http://javafx.com/fxml/1"
                fx:controller="sceneMove.LoginController"
                fx:id="login">
       <top>
          <BorderPane style="-fx-background-color: #eaeaea;">
             <center>
                <Label prefWidth="215.0" text="로그인 화면" alignment="CENTER" />
             </center>
             <left>
                <Button fx:id="btnMain" text="메인"/>
             </left>
             <padding>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
             </padding>
          </BorderPane>
       </top>
       <center>
          <VBox style="-fx-background-color: #ffff00;" />
       </center>
    </BorderPane>
    ```
    
    - 로그인 화면 컨트롤러
        - LoginController.java
    
    ```java
    import java.net.URL;
    import java.util.ResourceBundle;
    
    import javafx.event.ActionEvent;
    import javafx.fxml.FXML;
    import javafx.fxml.Initializable;
    import javafx.scene.control.Button;
    import javafx.scene.layout.BorderPane;
    import javafx.scene.layout.StackPane;
    
    public class LoginController implements Initializable {
    	@FXML private BorderPane login;
    	@FXML private Button btnMain;
    	
    	@Override
    	public void initialize(URL location, ResourceBundle resources) {
    		btnMain.setOnAction( e -> handleBtnMain(e) );
    	}
    	
    	public void handleBtnMain(ActionEvent event) {
    		try {
    			StackPane root = (StackPane) btnMain.getScene().getRoot();
    			root.getChildren().remove(login); // StackPane에서 로그인 화면 제거
    		} catch(Exception e) {
    			e.printStackTrace();
    		}
    	}
    }
    ```
    
    - 메인 클래스
        - AppMain.java
    
    ```java
    import javafx.application.Application;
    import javafx.fxml.FXMLLoader;
    import javafx.scene.Parent;
    import javafx.scene.Scene;
    import javafx.stage.Stage;
    
    public class AppMain extends Application {
    	@Override
    	public void start(Stage primaryStage) throws Exception {
    		primaryStage.setTitle("AppMain");
    		Parent root = FXMLLoader.load(AppMain.class.getResource("Root.fxml"));
    		Scene scene = new Scene(root);
    		primaryStage.setScene(scene);
    		primaryStage.setWidth(350);  // 윈도우의 고정 폭 설정
    		primaryStage.setHeight(500); // 윈도우의 고정 높이 설정
    		primaryStage.setResizable(false); // 윈도우 크기를 조정할 수 없도록 함
    		primaryStage.show();
    	}
    
    	public static void main(String[] args) {
    		launch(args);
    	}
    }
    ```
    
    ![Untitled](/images/lang_java/javaFx/화면_이동/Untitled%201.png)
    

---

## References

- 이것이 자바다 신용권의 Java 프로그래밍 정복 - 신용권 지음, 한빛미디어 출판