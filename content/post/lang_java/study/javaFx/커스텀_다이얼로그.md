---
title: "[Java] JavaFX 다이얼로그, 커스텀 다이얼로그"
description: ""
date: "2022-12-26T13:00:30+09:00"
thumbnail: ""
categories:
  - "Java"
tags:
  - "Java"
  - "JavaFX"

---
<!--more-->

- 다양한 내용의 다이얼로그를 만들고 싶다면 Stage로 직접 생성하면 된다.
    - Stage로 다이얼로그를 만들려면 다음과 같은 설정이 필요하다.
    
    ```java
    Stage dialog = new Stage(StageStyle.UTILITY);
    dialog.initModality(Modality.WINDOW_MODAL);
    dialog.initOwner(primaryStage);
    ```
    
    - Stage 생성자 매개값에는 윈도우 스타일을 결정짖는 StageStyle 열거 상수가 온다.
    
    ### StageStyle 열거 상수와 윈도우 스타일
    
    | StageStyle 열거 상수 | 설명 |
    | --- | --- |
    | DECORATED | 일반적인 윈도우 스타일, 배경이 흰색, 제목줄에 장식(아이콘, 타이틀, 축소, 복원 닫기 버튼 장식)이 있음 |
    | UNDECORATED | 배경이 흰색, 제목줄 없음 |
    | TRANSPARENT | 배경이 투명, 제목줄 없음 |
    | UNIFIED | DECORATED와 동일하나, 내용물의 경계선이 없음 |
    | UTILITY | 배경이 흰색이고, 제목줄에 타이틀, 종료 버튼만 있음 |
    - 만약 매개값이 없는 기본 생성자로 Stage를 생성했다면 DECORATED 윈도우가 생성
    - `intitModality(Modality.WINDOW_MODAL)`은 모달 다이얼로그로 설정
        - 이 설정을 하지 않으면 기본적으로 모달리스가 된다.
    - `initOwner(primaryStage)`는 소유자 윈도우(Stage)를 설정
- ex) 확인 다이얼로그의 내용을 정의한 FXML 파일
    - 확인 다이얼로그 내용을정의
        - Custom_dialog.fxml
    
    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    
    <?import javafx.scene.control.Button?>
    <?import javafx.scene.control.Label?>
    <?import javafx.scene.image.Image?>
    <?import javafx.scene.image.ImageView?>
    <?import javafx.scene.layout.AnchorPane?>
    
    <AnchorPane prefHeight="150.0" prefWidth="400.0" 
    			xmlns:fx="http://javafx.com/fxml/1" 
    			xmlns="http://javafx.com/javafx/19">
       <children>
          <ImageView fitHeight="50.0" fitWidth="50.0" 
          			 layoutX="15.0" layoutY="15.0" 
          			 pickOnBounds="true" preserveRatio="true">
             <image>
                <Image url="@images/dialog-info.png" />
             </image>
          </ImageView>
          <Button id="btnOk" layoutX="336.0" layoutY="104.0" 
          		  mnemonicParsing="false" text="확인" />
          <Label id="txtTitle" layoutX="87.0" layoutY="33.0" 
          		 prefHeight="15.0" prefWidth="290.0" />
       </children>
    </AnchorPane>
    ```
    
- ex) 확인 다이얼로그를 실행하는 코드
    - FXML 파일을 로딩
    - `lookup()` 메소드를 이용해서 id 속성값으로 Label과 Button을 찾아 text 속성값을 변경
    - ActionEvent를 처리할 리스너를 등록
    - Scene을 생성한 후에는 확인 다이얼로그인 Stage의 장면으로 세팅
    - RootController.java
    
    ```java
    import java.io.File;
    import java.net.URL;
    import java.util.ResourceBundle;
    
    import javafx.event.ActionEvent;
    import javafx.fxml.FXMLLoader;
    import javafx.fxml.Initializable;
    import javafx.scene.Scene;
    import javafx.scene.control.Button;
    import javafx.scene.control.Label;
    import javafx.scene.image.Image;
    import javafx.scene.image.ImageView;
    import javafx.scene.layout.AnchorPane;
    import javafx.stage.Modality;
    import javafx.stage.Popup;
    import javafx.stage.Stage;
    import javafx.stage.StageStyle;
    
    public class RootController implements Initializable {
    	@Override
    	public void initialize(URL location, ResourceBundle resources) {
    	}
    	
    	private Stage primaryStage;
    	public void setPrimaryStage(Stage primaryStage) {
    		this.primaryStage = primaryStage;
    	}
    	
    	// 커스텀 다이얼로그 실행
    	public void handleCustom(ActionEvent e) throws Exception {
    		Stage dialog = new Stage(StageStyle.UTILITY);
    		
    		dialog.initModality(Modality.WINDOW_MODAL);
    		dialog.initOwner(primaryStage);
    		dialog.setTitle("확인"); // 다이얼로그 제목
    		
    		AnchorPane anchorPane = 
    				(AnchorPane) FXMLLoader.load(getClass().getResource("Custom_dialog.fxml"));
    		
        // 메시지 설정
    		Label txtTitle = (Label) anchorPane.lookup("#txtTitle");
    		txtTitle.setText("확인하셨습니까?");
    		
    		// 버튼 이벤트 처리
    		Button btnOk = (Button) anchorPane.lookup("#btnOk");
    		btnOk.setOnAction( event -> dialog.close() );
    		
    		Scene scene = new Scene(anchorPane); // Scene 생성
    		
    		dialog.setScene(scene); // 다이얼로그에 Scene 설정
    		dialog.setResizable(false); // 크기를 변경하지 못하도록 설정
    		dialog.show();  // 다이얼로그 띄우기
    	}
    }
    ```
    
    ![Untitled](/images/lang_java/javaFx/커스텀_다이얼로그/Untitled.png)
    

---

## References

- 이것이 자바다 신용권의 Java 프로그래밍 정복 - 신용권 지음, 한빛미디어 출판