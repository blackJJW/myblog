---
title: "[Java] NIO, TCP 블로킹 채널, 블로킹과 인터럽트"
description: ""
date: "2023-02-04T13:00:30+09:00"
thumbnail: ""
categories:
  - "Java"
tags:
  - "Java"
  - "Network"

---
<!--more-->

- IO의 Socket에서는 입출력 스트림의 `read()`와 `write()` 메소드로 인해 작업 스레드가 블로킹되었을 경우
    - 다른 스레드가 작업 스레드의 `interrupt()` 메소드를 호출해도 블로킹 상태가 풀리지 않는다.
    - Socket의 `close()` 메소드를 호출해서 SocketException을 발생시켜야 한다.
- NIO의 SocketChannel의 경우 `read()`와 `write()` 메소드로 인해 작업 스레드가 블로킹되었을 경우
    - 다른 스레드가 작업 스레드의 `interrupt()` 메소드를 호출할 경우
        - ClosedByInterruptException이 발생
        - SocketChannel은 즉시 닫히면서 블로킹 상태가 풀린다.
- close() 메소드를 호출해서 SocketChannel을 닫을 수 있다.
    - 이 때 AsynchronousCloseException이 발생되면서 블로킹 상태가 풀린다.
- 작업 스레드의 `interrupt()` 메소드를 호출해서 읽는 작업을 중지시키면서 SocketChannel을 닫도록 유도
    
    ![Untitled](/images/lang_java/NIO/블로킹과_인터럽트/Untitled.png)
    

---

## References

- 이것이 자바다 신용권의 Java 프로그래밍 정복 - 신용권 지음, 한빛미디어 출판