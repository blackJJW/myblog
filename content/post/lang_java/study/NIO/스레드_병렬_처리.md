---
title: "[Java] NIO, TCP 블로킹 채널, 스레드 병렬 처리"
description: ""
date: "2023-01-31T21:00:30+09:00"
thumbnail: ""
categories:
  - "Java"
tags:
  - "Java"
  - "Network"

---
<!--more-->

- TCP 블로킹 방식은 데이터 입출력이 완료되기 전까지 `read()`와 `write()` 메소드가 블로킹
- 애플리케이션을 실행시키는 main 스레드가 직접 입출력 작업을 담당하게 되는 경우
    - 입출력이 완료될 때까지 다른 작업을 할 수 없는 상태가 된다.
    - ex) 서버 애플리케이션은 지속적으로 클라이언트의 연결 수락 기능을 수락해야 한다.
        - 입출력에서 블로킹되면 이 작업을 할 수 없게 된다.
        - 클라이언트1과 입출력하는 동안에는 클라이언트2와 입출력할 수 없게 된다.
        - 클라이언트 연결(채널) 하나에 작업 스레드 하나를 할당해서 병렬 처리해야 한다.

![Untitled](/images/lang_java/NIO/스레드_병렬_처리/Untitled.png)

- 스레드 병렬 처리를 할 경우 수천 개의 클라이언트가 동시에 연결될 경우
    - 수천 개의 스레드가 서버에 생성되기 때문에 서버 성능이 급격히 저하
    - 다운되는 현상 발생 가능
    - 클라이언트의 폭증으로 인해 서버의 과도한 스레드 생성을 방지하려면 스레드풀을 사용하는 것이 바람직

![Untitled](/images/lang_java/NIO/스레드_병렬_처리/Untitled%201.png)

- 위는 스레드풀을 이용할 경우 서버 구현 방식
    - 스레드풀은 스레드 수에는 변함이 없기 때문에 서버 성능은 원만히 저하
    - 대기하는 작업량이 증가하기 때문에 개별 클라이언트에서 응답을 늦게 받을 수 있다.
        - 이 경우 서버의 하드웨어 사양에 맞게 적절히 스레드풀의 스레드 수를 늘려주면 된다.

---

## References

- 이것이 자바다 신용권의 Java 프로그래밍 정복 - 신용권 지음, 한빛미디어 출판