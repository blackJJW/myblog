---
title: "[Java] 스레드풀, 리턴값이 없는 작업 완료 통보"
description: ""
date: "2022-10-24T21:40:30+09:00"
thumbnail: ""
categories:
  - "Java"
tags:
  - "Java"


---
<!--more-->

- 리턴값이 없는 작업일 경우에는 Runnable 객체로 생성하면 된다.
- Runnable 객체를 생성하는 방법
    
    ```java
    Runnable task = new Runnable() {
    	@Override
    	public void run(){
    		// 스레드가 처리할 작업 내용
    	}
    }
    ```
    
- 결과값이 없는 작업 처리 요청은 `submit(Runnable task)` 메소드를 이용
    - 결과값이 없음에도 불구하고 Future 객체를 리턴
        - 스레드가 작업 처리를 정상적으로 완료했는지, 아니면 작업 처리 도중에 예외가 발생했는지 확인하기 위해서이다.
    
    ```java
    Future future = executorService.submit(task);
    ```
    
    - 작업 처리가 정상적으로 완료되었을 경우
        - Futrue의 `get()` 메소드는 null 리턴
        - 스레드가 작업 처리를 정상적으로 완료했는지, 아니면 작업 처리 도중 interrupt되면 InterruptedException을 발생
        - 작업 처리 도중 예외가 발생하면 ExecutionException을 발생
        
        ### 그래서 다음과 같은 예외 처리 코드가 필요
        
        ```java
        try {
        	future.get();
        } catch (InterruptedException e){
        	// 작업 처리 도중 스레드가 interrupt 될 경우 실행할 코드
        } catch (ExecutionException e){
        	// 작업 처리 도중 예외가 발생된 경우 실행할 코드
        }
        ```
        
- ex) 리턴값이 없는 작업 완료 통보
    - 리턴값이 없고 단순히 1부터 10까지의 합을 출력하는 작업을 Runnable 객체로 생성
    - 스레드풀의 스레드가 처리하도록 요청
    - NoResultEx.java
    
    ```java
    import java.util.concurrent.ExecutorService;
    import java.util.concurrent.Executors;
    import java.util.concurrent.Future;
    
    public class NoResultEx {
    
    	public static void main(String[] args) {
    		ExecutorService executorService = Executors.newFixedThreadPool(
    				Runtime.getRuntime().availableProcessors()
    				);
    		
    		System.out.println("[ 작업 처리 요청 ]");
    		Runnable runnable = new Runnable() {
    			@Override
    			public void run() {
    				int sum = 0;
    				for(int i = 1; i <= 10; i++) { sum += i; }
    				System.out.println("[ 처리 결과 ] " + sum);
    			}
    		};
    		Future future = executorService.submit(runnable);
    		
    		try {
    			future.get();
    			System.out.println("[ 작업 처리 완료 ]");
    		} catch(Exception e) {
    			System.out.println("[ 실행 예외 발생 ] " + e.getMessage());
    		}
    		executorService.shutdown();
    
    	}
    
    }
    ```
    
    ![Untitled](/images/lang_java/multi_thread/스레드풀,_리턴값이_없는_작업_완료_통보/Untitled.png)
    

---

## References

- 이것이 자바다 신용권의 Java 프로그래밍 정복 - 신용권 지음, 한빛미디어 출판