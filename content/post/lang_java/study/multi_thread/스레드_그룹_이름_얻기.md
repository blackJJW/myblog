---
title: "[Java] 스레드 그룹 이름 얻기"
description: ""
date: "2022-10-15T19:40:30+09:00"
thumbnail: ""
categories:
  - "Java"
tags:
  - "Java"


---
<!--more-->

- 스레드 그룹(Thread Group)은 관련된 스레드를 묶어서 관리할 목적으로 이용
- JVM이 실행되면 system 스레드 그룹을 만든다.
    - JVM 운영에 필요한 스레드들을 생성해서 system 스레드 그룹에 포함시킨다.
    - system의 하위 스레드 그룹으로 main을 만들고 메인 스레드를 main 스레드 그룹에 포함시킨다.
- 스레드는 반드시 하나의 스레드 그룹에 포함
    - 명시적으로 스레드 그룹에 포함시키지 않으면 기본적으로 자신을 생성한 스레드와 같은 스레드 그룹에 속하게 된다.
- 우리가 생성하는 작업 스레드는 대부분 main 스레드가 생성하므로 기본적으로 main 스레드 그룹에 속하게 된다.

---

# 스레드 그룹 이름 얻기

- 현재 스레드락 속한 스레드 그룹의 이름을 얻고 싶다면 다음과 같은 코드를 사용 가능
    
    ```java
    ThreadGroup group = Thread.currentThread().getThreadGroup();
    String groupName = group.getName();
    ```
    
    - Thread의 정적 메소드인 `getAllStackTraces()`를 이용하면 프로세스 내에서 실행하는 모든 스레드에 대한 정보를 얻을 수 있다.
    
    ```java
    Map<Thread, StackTraceElement[]> map = Thread.getAllStackTraces();
    ```
    
    - getAllStackTraces() 메소드는 Map 타입의 객체를 리턴
        - 키는 스레드 객체
        - 값은 스레드의 상태 기록들을 갖고 있는 `StackTraceElement[]`배열
- ex) 현재 실행 중인 스레드 정보
    - 현재 실행하고 있는 스레드의 이름과 데몬 여부 그리고 속한 스레드 그룹 이름이 무엇인지 출력
    - ThreadInfoEx.java
    
    ```java
    import java.util.Map;
    import java.util.Set;
    
    public class ThreadInfoEx {
    
    	public static void main(String[] args) {
    		AutoSaveThread autoSaveThread = new AutoSaveThread();
    		autoSaveThread.setName("AutoSaveThread");
    		autoSaveThread.setDaemon(true);
    		autoSaveThread.start();
    		
    		Map<Thread, StackTraceElement[]> map = Thread.getAllStackTraces();
    		Set<Thread> threads = map.keySet();
    		
    		for(Thread thread : threads) {
    			System.out.println("Name : " + thread.getName() +
    					((thread.isDaemon()) ? "(Daemon)" : "(main)"));
    			System.out.println("\t" + "group : " + thread.getThreadGroup().getName());
    			System.out.println();
    		}
    
    	}
    
    }
    ```
    
    ![Untitled](/images/lang_java/multi_thread/스레드_그룹_이름_얻기/Untitled.png)
    
    - 가비지 컬렉션을 담당하는 Finalizer 스레드를 비롯한 일부 스레드들이 system 그룹에 속함
    - `main()` 메소드를 실행하는 main 스레드는 system 그룹의 하위 그룹인 main에 속함
    - main 스레드가 실행시킨 AutoSaveThread는 main 스레드가 소속된 main 그룹에 포함

---

## References

- 이것이 자바다 신용권의 Java 프로그래밍 정복 - 신용권 지음, 한빛미디어 출판